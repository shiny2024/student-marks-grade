
{% extends 'base.html' %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
<h3>Students</h3>
<form class="d-flex" method="get" action="{{ url_for('index') }}">
<input class="form-control me-2" type="search" name="q" placeholder="Search by name/roll/course" value="{{ q }}">
<button class="btn btn-outline-primary" type="submit">Search</button>
</form>
</div>
{% if students.items %}
<div class="table-responsive">
<table class="table table-striped">
<thead>
<tr>
<th>#</th>
<th>Roll No</th>
<th>Name</th>
<th>Age</th>
<th>Gender</th>
<th>Course</th>
<th>Actions</th>
</tr>
</thead>
<tbody>
{% for s in students.items %}
<tr>
<td>{{ s.id }}</td>
<td>{{ s.roll_no }}</td>
<td>{{ s.name }}</td>
<td>{{ s.age }}</td>
<td>{{ s.gender }}</td>
<td>{{ s.course }}</td>
<td>
<a class="btn btn-sm btn-secondary" href="{{ url_for('view_student', id=s.id) }}">View</a>
<a class="btn btn-sm btn-primary" href="{{ url_for('edit_student', id=s.id) }}">Edit</a>
<form method="post" action="{{ url_for('delete_student', id=s.id) }}" style="display:inline" onsubmit="return confirm('Delete this record?');">
<button class="btn btn-sm btn-danger">Delete</button>
</form>
</td>
</tr>
{% endfor %}
</tbody>
</table>
</div>


<nav aria-label="Page navigation">
<ul class="pagination">
{% if students.has_prev %}
<li class="page-item"><a class="page-link" href="?page={{ students.prev_num }}&q={{ q }}">Previous</a></li>
{% endif %}
<li class="page-item disabled"><span class="page-link">Page {{ students.page }} of {{ students.pages }}</span></li>
{% if students.has_next %}
<li class="page-item"><a class="page-link" href="?page={{ students.next_num }}&q={{ q }}">Next</a></li>
{% endif %}
</ul>
</nav>
{% else %}
<p>No students found. <a href="{{ url_for('add_student') }}">Add one</a>.</p>
{% endif %}
{% endblock %}
